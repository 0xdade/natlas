{% extends "base.html" %}
{% set title = "Manage Users" %}
{% set active_page = "users" %}
{% block content %}
  {% include 'admin/_header.html' %}
  <div class="row">
    <div class="col">
      <h3>Invite Users</h3>
      <form class="form-inline" action="" method="post">
        {{ inviteForm.hidden_tag() }}
        {{ inviteForm.email.label(class="sr-only", for="")}}
        {{ inviteForm.email(size=32, class="form-control", placeholder="user@example.com") }}
        {% for error in inviteForm.email.errors %}
        <span style="color: red;">{{ error }}</span>
        {% endfor %}
        {{ inviteForm.submit(class="btn btn-primary ml-3") }}
      </form>
    </div>
  </div>
  {% if users %}
  <div class="row">
    <div class="col">
      <h3 class="mt-3">Manage Users</h3>
      <table class="table table-striped dataTable" id="userTable">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Email</th>
            <th scope="col">Admin</th>
            <th scope="col"></th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr>
            <th scope="row">{{ user.id }}</th>
            <td>{{ user.email }}</td>
            <td>{{ user.is_admin }}</td>
            <td><form method="POST" action="{{ url_for('admin.deleteUser', id=user.id) }}">{{ delForm.hidden_tag() }} {{ delForm.deleteUser(class="btn btn-danger", onclick="return confirm('Are you sure you want to delete this user?')") }}</form></td>
            <td><form method="POST" action="{{ url_for('admin.toggleUser', id=user.id) }}">{{ editForm.hidden_tag() }}{{ editForm.editUser(class="btn btn-warning", onclick="return confirm('Are you sure you want to make this user an admin?')") }}</form></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% endif %}
{% endblock %}